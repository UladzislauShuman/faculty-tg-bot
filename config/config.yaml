# 1. Настройки источников данных
data_source:
  type: web
  url: "https://fpmi.bsu.by/about"
  max_depth: 10
  sitemap_only: false
  test_urls:
    # qa-test-set.yaml
    - "https://fpmi.bsu.by/enrollee"
    - "https://fpmi.bsu.by/about"
    - "https://fpmi.bsu.by/dean-office"
    - "https://fpmi.bsu.by/master-degree"
    - "https://fpmi.bsu.by/olympiads"
    # Дополнительные страницы для проверки разных типов контента
    - "https://fpmi.bsu.by/departments"
    - "https://fpmi.bsu.by/famcs_in_the_media"

# 2. Настройки Embedding-модели (Основная, для поиска и хранения векторов)
embedding_model:
  # Используем e5-small вместо large для скорости на CPU (Mac M4)
  # Если памяти много (>16GB свободной), можно вернуть large
  name: "intfloat/multilingual-e5-small"
  device: "cpu"
  normalize_embeddings: true

# [НОВОЕ] Настройки модели для оценки качества (LLM-as-a-Judge / Similarity)
# Используется только в режиме 'test'
evaluation_model:
  name: "cointegrated/rubert-tiny2" # Очень быстрая и легкая (45MB)
  device: "cpu"

# 3. Настройки Ретриверов
retrievers:
  # Настройки для векторного поиска (ChromaDB)
  vector_store:
    # db_path_base используется для генерации путей в тестах (data/chroma_db_markdown)
    db_path_base: "data/chroma_db"
    # db_path - это путь по умолчанию для Продакшена (Бот читает отсюда)
    db_path: "data/chroma_db"
    search_k: 5 # Сколько документов изначально искать

  # Настройки для поиска по ключевым словам (BM25)
  bm25:
    index_path_base: "data/bm25_index.pkl"
    index_path: "data/bm25_index.pkl"

  # Настройки для Re-ranker'а (Переранжирование)
  reranker:
    # Заменили английскую модель на русскую для лучшего качества
    model: "DiTy/cross-encoder-russian-msmarco"
    top_n: 3 # Сколько лучших документов отдавать в LLM

# 4. Настройки LLM-провайдеров (Генерация ответа)
providers:
  ollama:
    type: ollama
    model: "llama3.1" # Убедись, что модель загружена: ollama pull llama3.1

  yandex_gpt:
    type: yandex_gpt
    model: "yandexgpt-lite"
    secret: "YOUR_YANDEX_SECRET_KEY_HERE"

# 5. Настройки путей (Логи и артефакты)
paths:
  output_dir: "output"
  qa_test_set: "qa-test-set.yaml"
  indexing: "indexing.txt" # Сюда сохраняется текстовый дамп чанков
  run_bot: "answer.txt"    # Лог ответов бота
  retriever: "retriever.txt" # Лог работы ретривера
  sitemap: "sitemap.txt"
  test_pages_source: "test_pages_source.html"