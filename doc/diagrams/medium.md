graph TD
    subgraph "–ö–û–ù–¢–£–† 1: OFLINE (–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)"
        direction LR
        
        DS1("<b>–ò—Å—Ç–æ—á–Ω–∏–∫ 1:</b><br>–í–µ–±-—Å–∞–π—Ç —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞")
        DS2("<b>–ò—Å—Ç–æ—á–Ω–∏–∫ 2:</b><br>Excel-—Ñ–∞–π–ª —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è")
        
        Loader("<b>1. –ó–∞–≥—Ä—É–∑—á–∏–∫–∏ (Loaders)</b><br><i>–§—É–Ω–∫—Ü–∏—è:</i> –ß–∏—Ç–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.<br><b>–°—Ç–µ–∫: LangChain (WebBaseLoader, etc.)</b>")
        
        Splitter("<b>2. –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (Splitter)</b><br><i>–§—É–Ω–∫—Ü–∏—è:</i> –î–µ–ª–∏—Ç —Ç–µ–∫—Å—Ç—ã –Ω–∞ —á–∞–Ω–∫–∏.<br><b>–°—Ç–µ–∫: LangChain</b>")
        
        EmbeddingModel("<b>3. –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</b><br><i>–§—É–Ω–∫—Ü–∏—è:</i> –ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —á–∞–Ω–∫–∏ –≤ –≤–µ–∫—Ç–æ—Ä—ã.<br><b>–°—Ç–µ–∫: SentenceTransformers</b>")
        
        VectorDB("<b>4. –í–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö</b><br><i>–§—É–Ω–∫—Ü–∏—è:</i> –•—Ä–∞–Ω–∏—Ç –≤–µ–∫—Ç–æ—Ä—ã –¥–ª—è –ø–æ–∏—Å–∫–∞.<br><b>–°—Ç–µ–∫: ChromaDB</b>")

        DS1 --> Loader
        DS2 --> Loader
        Loader --> Splitter
        Splitter --> EmbeddingModel
        EmbeddingModel --> VectorDB
    end

    subgraph "–ö–û–ù–¢–£–† 2: ONLINE (–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞)"
        direction TB

        User[("üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å")]
        
        Telegram("<b>–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å: Telegram –ë–æ—Ç</b><br><i>–°—Ç–µ–∫: python-telegram-bot</i>")

        Orchestrator("<b>–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä (–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞)</b><br><i>–§—É–Ω–∫—Ü–∏—è:</i> –£–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º –æ—Ç–≤–µ—Ç–∞.<br><b>–°—Ç–µ–∫: LangChain Expression Language (LCEL)</b>")

        Memory("<b>–ü–∞–º—è—Ç—å –¥–∏–∞–ª–æ–≥–∞ (Conversation Memory)</b><br><i>–§—É–Ω–∫—Ü–∏—è:</i> –•—Ä–∞–Ω–∏—Ç –∏—Å—Ç–æ—Ä–∏—é –ø–µ—Ä–µ–ø–∏—Å–∫–∏<br>–¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã.")

        Reranker("<b>‚≠ê –ü–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤—â–∏–∫ (Re-ranker) ‚≠ê</b><br><i>–§—É–Ω–∫—Ü–∏—è:</i> –¢–æ—á–Ω–æ —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã,<br>–≤—ã–±–∏—Ä–∞—è —Å–∞–º—ã–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ.<br><b>–°—Ç–µ–∫: Cross-Encoder –º–æ–¥–µ–ª—å</b>")

        LLM("<b>–ë–æ–ª—å—à–∞—è –Ø–∑—ã–∫–æ–≤–∞—è –ú–æ–¥–µ–ª—å (LLM)</b><br><i>–§—É–Ω–∫—Ü–∏—è:</i> –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç.<br><b>–°—Ç–µ–∫: Ollama + Llama 3</b>")
        
        User -- "1. –ó–∞–ø—Ä–æ—Å" --> Telegram
        Telegram -- "2. –ü–µ—Ä–µ–¥–∞–µ—Ç –∑–∞–ø—Ä–æ—Å" --> Orchestrator
        Orchestrator -- "3. –û–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –ø–∞–º—è—Ç–∏" --> Memory
        Memory -- "4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é + —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å" --> Orchestrator
        Orchestrator -- "5. –í–µ–∫—Ç–æ—Ä–∏–∑—É–µ—Ç –≤–æ–ø—Ä–æ—Å –∏ –¥–µ–ª–∞–µ—Ç —à–∏—Ä–æ–∫–∏–π –ø–æ–∏—Å–∫ (—Ç–æ–ø-20)" --> VectorDB
        VectorDB -- "6. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 20 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤-–∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤" --> Reranker
        Reranker -- "7. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 5 –ª—É—á—à–∏—Ö, —Å–∞–º—ã—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤" --> Orchestrator
        Orchestrator -- "8. –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç (–ª—É—á—à–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã + –≤–æ–ø—Ä–æ—Å)" --> LLM
        LLM -- "9. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç" --> Orchestrator
        Orchestrator -- "10. –û–±–Ω–æ–≤–ª—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –≤ –ø–∞–º—è—Ç–∏ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç" --> Telegram
        Telegram -- "11. –û—Ç–≤–µ—Ç" --> User
    end

    %% –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è
    style VectorDB fill:#d6f5d6,stroke:#333
    style LLM fill:#cde4f7,stroke:#333
    style Reranker fill:#fff8c4,stroke:#333